resilience4j:
  circuitbreaker:
    instances:
      authServiceCircuitBreaker:
        slidingWindowType: COUNT_BASED
        slidingWindowSize: 3
        minimumNumberOfCalls: 3
        failureRateThreshold: 100
        waitDurationInOpenState: 30s
        permittedNumberOfCallsInHalfOpenState: 1
        registerHealthIndicator: true
        ignoreExceptions:
          - org.springframework.security.authentication.BadCredentialsException

  ratelimiter:
    instances:
      authServiceRateLimiter:
        limitForPeriod: 5        # maximum 5 login attempts
        limitRefreshPeriod: 1m   # per 1 minute
        timeoutDuration: 500ms   # wait time for a permit
#resilience4j:
#  ratelimiter:
#    authServiceRateLimiter:
#      limitForPeriod: 3
#      limitRefreshPeriod: 1m
#      timeoutDuration: 0
#  circuitbreaker:
#    authServiceCircuitBreaker:
#      registerHealthIndicator: true
#      slidingWindowSize: 5
#      minimumNumberOfCalls: 3
#      failureRateThreshold: 50
#      waitDurationInOpenState: 30s
#resilience4j:
#  circuitbreaker:
#    instances:
#      authServiceCircuitBreaker:
#        slidingWindowSize: 5
#        minimumNumberOfCalls: 3
#        failureRateThreshold: 50
#        waitDurationInOpenState: 10s
#        ignoreExceptions:
#          - org.springframework.security.authentication.BadCredentialsException
